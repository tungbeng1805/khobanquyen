"use strict";(function(document,window,$){var app={init:function(){$(app.ready)},ready:function(){app.events()},events:function(){$("button.affwp-styled-checkbox").on("click","",app.addonToggleClick)},addonToggleClick:function(){var $toggle=$(this).find("input"),$toggleLabel=$(this).find("span"),$toggleStatus=$(this).prev("p.affwp-status"),action=$toggle.attr("data-action"),plugin=$toggle.attr("data-plugin"),plugin_id=$toggle.attr("data-plugin-id"),toggleTextOrigin=$toggleLabel.text(),toggleTextNew=affwp_admin_addons_vars.deactivate,toggleStatusNew="",ajaxAction="";if(!$toggle.hasClass("disabled")){switch(action){case"install":ajaxAction="affwp_install_addons_page_plugin",toggleStatusNew=affwp_admin_addons_vars.status_active,$toggleLabel.text(affwp_admin_addons_vars.installing);break;case"activate":ajaxAction="affwp_activate_addons_page_plugin",toggleStatusNew=affwp_admin_addons_vars.status_active,$toggleLabel.text(affwp_admin_addons_vars.activating);break;case"deactivate":ajaxAction="affwp_deactivate_addons_page_plugin",toggleTextNew=affwp_admin_addons_vars.activate,toggleStatusNew=affwp_admin_addons_vars.status_inactive,$toggleLabel.text(affwp_admin_addons_vars.deactivating);break;default:return}$toggle.attr("disabled",!0),$.post(affwp_admin_addons_vars.ajax_url,{action:ajaxAction,nonce:affwp_admin_addons_vars.nonce,plugin:plugin,addonID:plugin_id}).done(function(res){$toggle.hasClass("checked")?$toggle.removeClass("checked"):$toggle.addClass("checked"),$toggleLabel.text(toggleTextNew),$toggleStatus.html(toggleStatusNew),app.addonToggleDone(res,$toggle,action)}).fail(function(){var msg=app.addonErrorMsg(action);$toggleLabel.text(toggleTextOrigin).parent().after('<p class="affwp-addon-error">'+msg+"</p>")})}},addonToggleDone:function(res,$toggle,action){if(("install"===action||"activate"===action)&&res.success)return void $toggle.attr({disabled:!1,"data-action":"deactivate"});if("deactivate"===action?res.success:res.success)return void $toggle.attr({disabled:!1,"data-action":"activate"});var msg=app.addonErrorMsg(action);$toggle.parent().after('<p class="affwp-addon-error">'+msg+"</p>")},addonErrorMsg:function(action){switch(action){case"activate":var msg=affwp_admin_addons_vars.error_could_not_activate;break;case"deactivate":var msg=affwp_admin_addons_vars.error_could_not_deactivate;break;default:var msg=affwp_admin_addons_vars.error_could_not_install}return msg}};return app})(document,window,jQuery).init();