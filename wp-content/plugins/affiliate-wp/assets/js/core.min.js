"use strict";var AffiliateWPEducation=window.AffiliateWPEducation||{};AffiliateWPEducation.core=AffiliateWPEducation.core||function(document,window,$){var spinner='<div class="affwp-spinner"><svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20"></circle><circle cx="25" cy="25" r="20"></circle></svg></div>',app={init:function(){$(app.ready)},ready:function(){app.events()},events:function(){app.trackClickEvents()},getNameValue:function(el){if(!el.hasAttribute("data-name"))throw new Error("Can not find a UTM value. You need to add data-utm-content or data-name to the target element.");return el.dataset.name},getUTMContentValue:function(el){return el.hasAttribute("data-utm-content")?el.dataset.utmContent:this.getNameValue(el)},slugToUTMContent:function(slug){return slug?slug.toString().replace(/[^a-z\d ]/gi," ").replace(/\b[a-z]/g,function(_char){return _char.toUpperCase()}):""},getUpgradeURL:function(utmContent,type){var baseURL=affiliatewp_education.upgrade[type].url,appendChar=/(\?)/.test(baseURL)?"&":"?";return baseURL.indexOf("https://affiliatewp.com")===-1&&(appendChar=encodeURIComponent(appendChar)),baseURL+appendChar+"utm_content="+encodeURIComponent(utmContent.trim())},getSpinner:function(){return spinner},getUpgradeModalWidth:function(isVideoModal){var windowWidth=$(window).width();return windowWidth<=300?"250px":windowWidth<=750?"350px":!isVideoModal||windowWidth<=1024?"550px":windowWidth>1070?"1040px":"994px"},getInstallModalWidth:function(){return $(window).width()<480?"320px":"430px"},trackClickEvents:function(){$(document).on("click",".affwp-education-modal[data-action]",function(e){e.preventDefault(),e.stopImmediatePropagation();var $self=$(this);switch($self.data("action")){case"activate":app.activateModal($self);break;case"install":app.installModal($self)}})},activateModal:function($button){var feature=$button.data("name");$.alert({title:!1,content:affiliatewp_education.activate_prompt.replace(/%name%/g,feature),icon:"fa fa-info-circle",type:"lightgreen",boxWidth:app.getInstallModalWidth(),theme:"modern,affiliatewp-education",useBootstrap:!1,buttons:{confirm:{text:affiliatewp_education.activate_confirm,btnClass:"btn-confirm",keys:["enter"],action:function(){return this.$$confirm.prop("disabled",!0).html(spinner+affiliatewp_education.activating),this.$$cancel.prop("disabled",!0),app.activateAddon($button,this),!1}},cancel:{text:affiliatewp_education.cancel}}})},activateAddon:function($button,previousModal){$.post(affiliatewp_education.ajax_url,{action:"affwp_activate_addons_page_plugin",nonce:$button.data("nonce"),plugin:$button.data("plugin"),addonID:$button.data("id")},function(res){previousModal.close(),res.success?($button.removeClass("affwp-education-modal"),app.saveModal($button,affiliatewp_education.addon_activated,!1)):$.alert({title:!1,content:res.data.error,icon:"fa fa-exclamation-circle",type:"red",boxWidth:app.getInstallModalWidth(),theme:"modern,affiliatewp-education",useBootstrap:!1,buttons:{confirm:{text:affiliatewp_education.close,btnClass:"btn-confirm",keys:["enter"]}}})})},saveModal:function($button,title,content){title=title||affiliatewp_education.addon_activated,content=content||affiliatewp_education.save_prompt,$.alert({title:title.replace(/\.$/,""),content:content,icon:"fa fa-check-circle",type:"lightgreen",boxWidth:app.getInstallModalWidth(),theme:"modern,affiliatewp-education",useBootstrap:!1,buttons:{confirm:{text:affiliatewp_education.save_confirm,btnClass:"btn-confirm",keys:["enter"],action:function(){this.$$confirm.prop("disabled",!0).html(spinner+affiliatewp_education.saving),this.$$cancel.prop("disabled",!0);var tag=$button.get(0).tagName;return"INPUT"!==tag||"checkbox"!==$button.attr("type")||$button.is(":checked")||$button.trigger("click"),$("#submit").trigger("click"),!1}},cancel:{text:affiliatewp_education.close}}})},installModal:function($button){var feature=$button.data("name");$.alert({title:!1,content:affiliatewp_education.install_prompt.replace(/%name%/g,feature),icon:"fa fa-info-circle",type:"lightgreen",boxWidth:app.getInstallModalWidth(),theme:"modern,affiliatewp-education",useBootstrap:!1,buttons:{confirm:{text:affiliatewp_education.install_confirm,btnClass:"btn-confirm",keys:["enter"],isHidden:!affiliatewp_education.can_install_addons,action:function(){return this.$$confirm.prop("disabled",!0).html(spinner+affiliatewp_education.installing),this.$$cancel.prop("disabled",!0),app.installAddon($button,this),!1}},cancel:{text:affiliatewp_education.cancel}}})},installAddon:function($button,previousModal){$.post(affiliatewp_education.ajax_url,{action:"affwp_install_addons_page_plugin",nonce:$button.data("nonce"),plugin:$button.data("plugin"),addonID:$button.data("id")},function(res){previousModal.close(),res.success?($button.removeClass("affwp-education-modal"),app.saveModal($button,affiliatewp_education.addon_installed,!1)):$.alert({title:!1,content:res.data.error,icon:"fa fa-exclamation-circle",type:"red",boxWidth:app.getInstallModalWidth(),theme:"modern,affiliatewp-education",useBootstrap:!1,buttons:{confirm:{text:affiliatewp_education.close,btnClass:"btn-confirm",keys:["enter"]}}})})}};return app}(document,window,jQuery),AffiliateWPEducation.core.init();